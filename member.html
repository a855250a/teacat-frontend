<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>會員中心 | 茶貓商店</title>

<style>
    body { font-family: Arial; background:#fafafa; margin:0; padding:0; }
    .wrapper { max-width: 800px; margin: 80px auto; background:#fff; padding:30px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.08); }
    h2 { margin-top:0; }
    .order-box { padding:18px; border:1px solid #eee; margin-bottom:15px; border-radius:10px; }
    .order-box:hover { background:#f7f7f7; cursor:pointer; }
</style>
</head>

<body>

<div class="wrapper">
    <h2>會員中心</h2>

    <h3>我的訂單</h3>
    <div id="orderList">載入中...</div>
</div>

<script>
const token = localStorage.getItem("token");

if (!token) {
    alert("請先登入！");
    window.location.href = "login.html";
}

async function loadOrders() {
    const res = await fetch("https://teacat-backend-1.onrender.com/order/my", {
        headers: { "Authorization": "Bearer " + token }
    });

    const data = await res.json();
    const list = document.getElementById("orderList");

    if (!data.success || data.orders.length === 0) {
        list.innerHTML = "<p>目前沒有訂單</p>";
        return;
    }

    list.innerHTML = data.orders.map(o => `
        <div class="order-box" onclick="location.href='order-detail.html?id=${o._id}'">
            <p><strong>訂單編號：</strong>${o._id}</p>
            <p><strong>總金額：</strong>$${o.total}</p>
            <p><strong>日期：</strong>${new Date(o.createdAt).toLocaleString()}</p>
        </div>
    `).join("");
}

loadOrders();
</script>

</body>
</html>
